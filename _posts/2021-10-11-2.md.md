[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/corazzon/finance-data-analysis/blob/main/2.2.%20KRX%20%EC%A0%84%EC%B2%B4%20%EC%A2%85%EB%AA%A9%EB%B6%84%EC%84%9D-input.ipynb)

## 한국거래소(KRX) 전체 종목 분석
* Pandas cheat sheet 를 함께 보세요! : [Pandas_Cheat_Sheet.pdf](https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf)

* FinanceDataReader를 통한 KRX 전체 종목 수집
    * to_csv("파일명", index=False) : csv 파일로 저장하기
    * read_csv("파일명") : csv 파일 불러오기
    
* Pandas를 통한 파일 저장과 불러오기
    * shape를 통한 행과 열의 수 보기
    * head, tail, sample 을 통한 일부 데이터 가져오기
    
* DataFrame의 info(), describe() 등을 통한 요약과 기술통계 값 구하기
    * info()
    * describe()
    * nunique()
    * index
    * columns
    * values
    
* Pandas의  DataFrame과 Series의 이해
    * Series : 1차원 벡터구조
    * DataFrame : 2차원 행렬구조
    
* 색인하기
    * [컬럼]
    * .loc[행]
    * .loc[행, 열]
    * .loc[조건식, 열]
    
* DataFrame의 데이터 타입 이해하기
    * 날짜 데이터의 변환
    
* DataFrame 다루기
    * 열(column) 인덱싱
    * 행(index) 인덱싱
    * 행, 열 인덱싱
    * 정렬하기 : sort_values 사용하기
    * 조건식 사용하기

* 빈도수 구하기
    * 한 개의 변수 : series.value_counts()
    * 두 개의 변수 : pd.crosstab()

* groupby 와 pivot_table
    * 다양한 연산식의 사용


## ⚠️ 주의할 점 ⚠️ 
* 강좌의 분석내용과 여러분의 실습 결과는 시점의 차이로 빈도수 등의 결과값이 다르게 나옵니다.



## 라이브러리 불러오기


```python
# 데이터 분석을 위해 pandas, 시각화를 위해 seaborn 불러오기
import pandas as pd
import seaborn as sns
```

## FinanceDataReader 로 수집한 전체 종목 불러오기

* 한국 주식 가격, 미국주식 가격, 지수, 환율, 암호화폐 가격, 종목 리스팅 등 금융 데이터 수집 라이브러리
* [FinanceData/FinanceDataReader: Financial data reader](https://github.com/FinanceData/FinanceDataReader)
* [FinanceDataReader 사용자 안내서 | FinanceData](https://financedata.github.io/posts/finance-data-reader-users-guide.html)
* https://pandas-datareader.readthedocs.io/en/latest/readers/index.html

* **note**
    1. symbol은 예를 들어 060310를 숫자 타입으로 인식할 경우, 결과값 60310으로 출력되어 앞자리 '0'을 표시하지 않는다. 
    2. 문자타입으로 변경 해줘야한다.dtype={"symbol":object}


```python
# 이전 강좌에서 to_csv로 저장해둔 krx.csv 파일을 pd.read_csv 로 불러옵니다.
df = pd.read_csv("krx.csv", dtype={"symbol":object})
df.shape
```




    (7339, 10)



### 일부 데이터만 가져오기

{'회사명':'Name', '종목코드':'Symbol', '업종':'Sector', '주요제품':'Industry', 
                            '상장일':'ListingDate', '결산월':'SettleMonth',  '대표자명':'Representative', 
                            '홈페이지':'HomePage', '지역':'Region', }


```python
# head 로 위에 있는 데이터 일부만 가져옵니다.
df.head(2)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>전자부품 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>KOSPI</td>
      <td>AJ네트웍스</td>
      <td>산업용 기계 및 장비 임대업</td>
      <td>렌탈(파렛트, OA장비, 건설장비)</td>
      <td>2015-08-21</td>
      <td>12월</td>
      <td>박대현</td>
      <td>http://www.ajnet.co.kr</td>
      <td>서울특별시</td>
    </tr>
  </tbody>
</table>
</div>




```python
# tail 로 아래 있는 데이터 일부만 가져옵니다.
df.tail(-1)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>KOSPI</td>
      <td>AJ네트웍스</td>
      <td>산업용 기계 및 장비 임대업</td>
      <td>렌탈(파렛트, OA장비, 건설장비)</td>
      <td>2015-08-21</td>
      <td>12월</td>
      <td>박대현</td>
      <td>http://www.ajnet.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>3</th>
      <td>054620</td>
      <td>KOSDAQ</td>
      <td>APS홀딩스</td>
      <td>기타 금융업</td>
      <td>인터넷 트래픽 솔루션</td>
      <td>2001-12-04</td>
      <td>12월</td>
      <td>정기로</td>
      <td>http://www.apsholdings.co.kr</td>
      <td>경기도</td>
    </tr>
    <tr>
      <th>4</th>
      <td>265520</td>
      <td>KOSDAQ</td>
      <td>AP시스템</td>
      <td>특수 목적용 기계 제조업</td>
      <td>디스플레이 제조 장비</td>
      <td>2017-04-07</td>
      <td>12월</td>
      <td>김영주</td>
      <td>http://www.apsystems.co.kr</td>
      <td>경기도</td>
    </tr>
    <tr>
      <th>5</th>
      <td>211270</td>
      <td>KOSDAQ</td>
      <td>AP위성</td>
      <td>통신 및 방송 장비 제조업</td>
      <td>위성통신 단말기</td>
      <td>2016-03-04</td>
      <td>12월</td>
      <td>류장수</td>
      <td>http://www.apsi.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7334</th>
      <td>000547</td>
      <td>KOSPI</td>
      <td>흥국화재2우B</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7335</th>
      <td>000545</td>
      <td>KOSPI</td>
      <td>흥국화재우</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7336</th>
      <td>003280</td>
      <td>KOSPI</td>
      <td>흥아해운</td>
      <td>해상 운송업</td>
      <td>외항화물운송업(케미컬탱커)</td>
      <td>1976-06-29</td>
      <td>12월</td>
      <td>이환구</td>
      <td>http://www.heung-a.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>7337</th>
      <td>037440</td>
      <td>KOSDAQ</td>
      <td>희림</td>
      <td>건축기술, 엔지니어링 및 관련 기술 서비스업</td>
      <td>설계 및 감리용역</td>
      <td>2000-02-03</td>
      <td>12월</td>
      <td>정영균, 이목운, 허철호 (각자대표)</td>
      <td>http://www.heerim.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>7338</th>
      <td>238490</td>
      <td>KOSDAQ</td>
      <td>힘스</td>
      <td>특수 목적용 기계 제조업</td>
      <td>OLED Mask 인장기, OLED Mask 검사기 등</td>
      <td>2017-07-20</td>
      <td>12월</td>
      <td>김주환</td>
      <td>http://www.hims.co.kr</td>
      <td>인천광역시</td>
    </tr>
  </tbody>
</table>
<p>7338 rows × 10 columns</p>
</div>




```python
# sample을 사용하면 랜덤하게 ()안의 갯수만큼 가져옵니다. 
# ()안에 값을 써주지 않으면 한 개만 가져옵니다.
df.sample(3)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4686</th>
      <td>060850</td>
      <td>KOSDAQ</td>
      <td>영림원소프트랩</td>
      <td>소프트웨어 개발 및 공급업</td>
      <td>ERP Package, 유지 관리 등</td>
      <td>2020-08-12</td>
      <td>12월</td>
      <td>권영범</td>
      <td>http://ksystem.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>5250</th>
      <td>222040</td>
      <td>KOSDAQ</td>
      <td>코스맥스엔비티</td>
      <td>기타 식품 제조업</td>
      <td>건강기능식품</td>
      <td>2015-12-16</td>
      <td>12월</td>
      <td>윤원일</td>
      <td>http://www.nutribiotech.co.kr</td>
      <td>경기도</td>
    </tr>
    <tr>
      <th>2594</th>
      <td>220630</td>
      <td>KOSDAQ</td>
      <td>맘스터치</td>
      <td>음·식료품 및 담배 도매업</td>
      <td>햄버거, 치킨, 식음료유통</td>
      <td>2015-08-28</td>
      <td>12월</td>
      <td>김동전</td>
      <td>http://www.momstouchandco.com</td>
      <td>서울특별시</td>
    </tr>
  </tbody>
</table>
</div>



## 데이터 요약하기


```python
# info 로 요약 데이터를 봅니다.
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 7339 entries, 0 to 7338
    Data columns (total 10 columns):
     #   Column          Non-Null Count  Dtype 
    ---  ------          --------------  ----- 
     0   Symbol          7339 non-null   object
     1   Market          7339 non-null   object
     2   Name            7339 non-null   object
     3   Sector          2463 non-null   object
     4   Industry        2444 non-null   object
     5   ListingDate     2463 non-null   object
     6   SettleMonth     2463 non-null   object
     7   Representative  2463 non-null   object
     8   HomePage        2314 non-null   object
     9   Region          2463 non-null   object
    dtypes: object(10)
    memory usage: 573.5+ KB
    


```python
# describe 로 기술통계값을 봅니다.
df.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>7339</td>
      <td>7339</td>
      <td>7339</td>
      <td>2463</td>
      <td>2444</td>
      <td>2463</td>
      <td>2463</td>
      <td>2463</td>
      <td>2314</td>
      <td>2463</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>7339</td>
      <td>3</td>
      <td>7339</td>
      <td>160</td>
      <td>2293</td>
      <td>1820</td>
      <td>9</td>
      <td>2336</td>
      <td>2292</td>
      <td>22</td>
    </tr>
    <tr>
      <th>top</th>
      <td>57GH74</td>
      <td>KOSPI</td>
      <td>한국조선해양</td>
      <td>소프트웨어 개발 및 공급업</td>
      <td>기업인수합병</td>
      <td>1976-06-30</td>
      <td>12월</td>
      <td>-</td>
      <td>http://imt@kmaringroup.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>5672</td>
      <td>1</td>
      <td>144</td>
      <td>27</td>
      <td>8</td>
      <td>2402</td>
      <td>5</td>
      <td>2</td>
      <td>998</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 중복을 제외한 unique 값의 갯수를 봅니다.
df.nunique()
```




    Symbol            7339
    Market               3
    Name              7339
    Sector             160
    Industry          2293
    ListingDate       1820
    SettleMonth          9
    Representative    2336
    HomePage          2292
    Region              22
    dtype: int64




```python
df.shape
```




    (7339, 10)




```python
# index 값 보기
df.index
```




    RangeIndex(start=0, stop=7339, step=1)




```python
# 컬럼값 보기
df.columns
```




    Index(['Symbol', 'Market', 'Name', 'Sector', 'Industry', 'ListingDate',
           'SettleMonth', 'Representative', 'HomePage', 'Region'],
          dtype='object')




```python
# 값만 보기
df.values
```




    array([['060310', 'KOSDAQ', '3S', ..., '박종익, 김세완 (각자 대표이사)',
            'http://www.3sref.com', '서울특별시'],
           ['095570', 'KOSPI', 'AJ네트웍스', ..., '박대현',
            'http://www.ajnet.co.kr', '서울특별시'],
           ['006840', 'KOSPI', 'AK홀딩스', ..., '채형석, 이석주(각자 대표이사)',
            'http://www.aekyunggroup.co.kr', '서울특별시'],
           ...,
           ['003280', 'KOSPI', '흥아해운', ..., '이환구', 'http://www.heung-a.com',
            '서울특별시'],
           ['037440', 'KOSDAQ', '희림', ..., '정영균, 이목운, 허철호 (각자대표)',
            'http://www.heerim.com', '서울특별시'],
           ['238490', 'KOSDAQ', '힘스', ..., '김주환', 'http://www.hims.co.kr',
            '인천광역시']], dtype=object)



## 데이터 색인하기

### Series
<img src="https://pandas.pydata.org/docs/_images/01_table_series.svg">

* **note**
    1. df["Name"] 와 df.Name의 차이는 특수 문자 또는 띄어쓰기가 있을 경우 df["Name"] 사용하여 제약조건 없이 사용 가능하지만, df.Name은 제약조건에 의해 사용 하지 못함


```python
# Name 컬럼 하나만 가져옵니다.
## df["Name"] 와 df.Name의 차이는 특수 문자 또는 띄어쓰기가 있을 경우 df["Name"] 사용하여 제약조건 없이 사용
## 가능하지만, df.Name은 제약조건에 의해 사용 하지 못함
df["Name"]
```




    0            3S
    1        AJ네트웍스
    2         AK홀딩스
    3        APS홀딩스
    4         AP시스템
             ...   
    7334    흥국화재2우B
    7335      흥국화재우
    7336       흥아해운
    7337         희림
    7338         힘스
    Name: Name, Length: 7339, dtype: object




```python
# df["Name"] 의 type을 봅니다.
type(df["Name"])
```




    pandas.core.series.Series




```python
# 0번째 행만 가져옵니다. 행인덱스를 가져올때는 .loc를 사용합니다.
# loc는 위치(locate)를 의미합니다.
df.loc[50]
```




    Symbol                          138930
    Market                           KOSPI
    Name                           BNK금융지주
    Sector                          기타 금융업
    Industry                        금융지주회사
    ListingDate                 2011-03-30
    SettleMonth                        12월
    Representative                     김지완
    HomePage          http://www.bnkfg.com
    Region                           부산광역시
    Name: 50, dtype: object




```python
# df.loc[0] 의 type을 봅니다.
type(df.loc[0])
```




    pandas.core.series.Series



### DataFrame
<img src="https://pandas.pydata.org/docs/_images/01_table_dataframe.svg">


```python
# df 변수의 타입을 봅니다.
type(df)
```




    pandas.core.frame.DataFrame




```python
# 여러 컬럼을 지정할 때는 리스트 형태로 묶어주어야 합니다. 
# 2차원 행렬은 대괄호가 [] 2개가 있다는 것을 기억해 주세요. 
df[["Symbol", "Name"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>3S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>AJ네트웍스</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>AK홀딩스</td>
    </tr>
    <tr>
      <th>3</th>
      <td>054620</td>
      <td>APS홀딩스</td>
    </tr>
    <tr>
      <th>4</th>
      <td>265520</td>
      <td>AP시스템</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7334</th>
      <td>000547</td>
      <td>흥국화재2우B</td>
    </tr>
    <tr>
      <th>7335</th>
      <td>000545</td>
      <td>흥국화재우</td>
    </tr>
    <tr>
      <th>7336</th>
      <td>003280</td>
      <td>흥아해운</td>
    </tr>
    <tr>
      <th>7337</th>
      <td>037440</td>
      <td>희림</td>
    </tr>
    <tr>
      <th>7338</th>
      <td>238490</td>
      <td>힘스</td>
    </tr>
  </tbody>
</table>
<p>7339 rows × 2 columns</p>
</div>




```python
# 여러 개의 행을 가져올 때도 [] 대괄호를 통해 리스트 형태로 묶어줍니다.
df.loc[[0, 1,2,3,5]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>전자부품 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>KOSPI</td>
      <td>AJ네트웍스</td>
      <td>산업용 기계 및 장비 임대업</td>
      <td>렌탈(파렛트, OA장비, 건설장비)</td>
      <td>2015-08-21</td>
      <td>12월</td>
      <td>박대현</td>
      <td>http://www.ajnet.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>3</th>
      <td>054620</td>
      <td>KOSDAQ</td>
      <td>APS홀딩스</td>
      <td>기타 금융업</td>
      <td>인터넷 트래픽 솔루션</td>
      <td>2001-12-04</td>
      <td>12월</td>
      <td>정기로</td>
      <td>http://www.apsholdings.co.kr</td>
      <td>경기도</td>
    </tr>
    <tr>
      <th>5</th>
      <td>211270</td>
      <td>KOSDAQ</td>
      <td>AP위성</td>
      <td>통신 및 방송 장비 제조업</td>
      <td>위성통신 단말기</td>
      <td>2016-03-04</td>
      <td>12월</td>
      <td>류장수</td>
      <td>http://www.apsi.co.kr</td>
      <td>서울특별시</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 1개의 컬럼을 가져올 때도 대괄호[] 2개를 써서 리스트 형태로 묶어주게 되면 데이터프레임 형태로 반환됩니다.
# "Name" 을 데이터프레임으로 가져옵니다.
df[["Name"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AJ네트웍스</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AK홀딩스</td>
    </tr>
    <tr>
      <th>3</th>
      <td>APS홀딩스</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AP시스템</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>7334</th>
      <td>흥국화재2우B</td>
    </tr>
    <tr>
      <th>7335</th>
      <td>흥국화재우</td>
    </tr>
    <tr>
      <th>7336</th>
      <td>흥아해운</td>
    </tr>
    <tr>
      <th>7337</th>
      <td>희림</td>
    </tr>
    <tr>
      <th>7338</th>
      <td>힘스</td>
    </tr>
  </tbody>
</table>
<p>7339 rows × 1 columns</p>
</div>




```python
type(df[["Name"]])
```




    pandas.core.frame.DataFrame



### loc를 통한 서브셋 가져오기
<img src="https://pandas.pydata.org/pandas-docs/stable/_images/03_subset_columns_rows.svg">


```python
# 행과 열 함께 가져오기
# .loc[행, 열]
df.loc[0, "Symbol"]
```


```python
# .loc[행, 열]
df.loc[1]["Name"]
```




    'AJ네트웍스'



* **note**
    1. df.loc[0]["Symbol"]보다 df.loc[0, "Symbol"]로 사용 하는 것이 가장 효율적(빠르게 프로파일링)  


```python
# %timeit
# df.loc[0]["Symbol"]보다 df.loc[0, "Symbol"]로 사용 하는 것이 가장 효율적(빠르게 프로파일링)
%timeit df.loc[0, "Symbol"]
```

    8.93 µs ± 417 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
    


```python
# %timeit
%timeit df.loc[0]["Symbol"]
```

    76.4 µs ± 812 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
    


```python
# 여러 개의 행과 하나의 컬럼 가져오기
# .loc[행, 열]
df.loc[[0,1,5], "Sector"]
```




    0           전자부품 제조업
    1    산업용 기계 및 장비 임대업
    5     통신 및 방송 장비 제조업
    Name: Sector, dtype: object




```python
# 여러개의 행과 여러 개의 컬럼 가져오기
# .loc[행, 열]
# []는 리스트 형태이며, 
# df.loc[[0,1,5], "Sector", "Symbol"] 해당 결과값은 error이며, 컬럼도 리스트 형태 즉 []로 작성해줘야 한다.
df.loc[[0,1,5], ["Sector", "Symbol"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sector</th>
      <th>Symbol</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>전자부품 제조업</td>
      <td>060310</td>
    </tr>
    <tr>
      <th>1</th>
      <td>산업용 기계 및 장비 임대업</td>
      <td>095570</td>
    </tr>
    <tr>
      <th>5</th>
      <td>통신 및 방송 장비 제조업</td>
      <td>211270</td>
    </tr>
  </tbody>
</table>
</div>



### Boolean Indexing
* 결과값이 True, False bool 형태로 반환되기 때문에 boolean indexing 이라고 부릅니다.
* boolean indexing 을 사용해 특정 조건식을 만족하는 데이터를 서브셋으로 가져옵니다.

<img src="https://pandas.pydata.org/docs/_images/03_subset_rows.svg">

* **note**
    1. 파이썬에서 = 할당 하나 의미, == 비교 연산


```python
# 카카오를 찾습니다.
## 파이썬에서 = 할당 하나 의미, == 비교 연산
#display(df["Name"] == "카카오")

df[df["Name"] == "삼성전자"]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3967</th>
      <td>005930</td>
      <td>KOSPI</td>
      <td>삼성전자</td>
      <td>통신 및 방송 장비 제조업</td>
      <td>IMT2000 서비스용 동기식 기지국,교환국장비,데이터단말기,동영상휴대폰,핵심칩,반...</td>
      <td>1975-06-11</td>
      <td>12월</td>
      <td>김기남, 김현석, 고동진</td>
      <td>http://www.sec.co.kr</td>
      <td>경기도</td>
    </tr>
  </tbody>
</table>
</div>



<img src="https://pandas.pydata.org/pandas-docs/stable/_images/03_subset_columns_rows.svg">


```python
# and => &
# or => |
True and False
```




    False



* **note**
    1. Cell에 대한 코드의 결과값은 가장 마지막 줄의 코드값만 호출
    2. display() 사용할 경우, 해당 display() 대상도 호출


```python
# 서울특별시에 소재지를 두고 있는 KOSPI 종목의 종목명과 심볼을 가져옵니다.
# .loc[행, 열]
# .loc[조건식, 열]
## 해당 코드의 결과값은 가장 마지막 코드값만 나오게 되어 있음.
## 하지만, display를 사용하며 해당 코드도 결과값 출력
## df["Region"] == "서울특별시"
## display(df[df["Region"] == "서울특별시"])
##df(df["Market"] == "KOSPI")
## df["Region"] == "서울특별시" & df["Market"] == "KOSPI" ## 연산자 우선 순위를 정해줘야 오류나지 않음
## (df["Region"] == "서울특별시") & (df["Market"] == "KOSPI") ## 내부 벡터끼리 연산를 해서 결과값 도출(&, | 사용해야함)
## df.loc[(df["Region"] == "서울특별시") & (df["Market"] == "KOSPI"), ["Symbol","Name"]]

seoul = df["Region"] == "서울특별시"
kospi = df["Market"] == "KOSPI"
df.loc[seoul & kospi,["Symbol", "Name"]]
df.loc[(seoul & kospi),["Symbol", "Name"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>AJ네트웍스</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>AK홀딩스</td>
    </tr>
    <tr>
      <th>48</th>
      <td>027410</td>
      <td>BGF</td>
    </tr>
    <tr>
      <th>49</th>
      <td>282330</td>
      <td>BGF리테일</td>
    </tr>
    <tr>
      <th>51</th>
      <td>001460</td>
      <td>BYC</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7321</th>
      <td>079980</td>
      <td>휴비스</td>
    </tr>
    <tr>
      <th>7324</th>
      <td>005010</td>
      <td>휴스틸</td>
    </tr>
    <tr>
      <th>7329</th>
      <td>069260</td>
      <td>휴켐스</td>
    </tr>
    <tr>
      <th>7333</th>
      <td>000540</td>
      <td>흥국화재</td>
    </tr>
    <tr>
      <th>7336</th>
      <td>003280</td>
      <td>흥아해운</td>
    </tr>
  </tbody>
</table>
<p>415 rows × 2 columns</p>
</div>



## 파생변수 만들기

* **note**
    1. pd.to_datetime(df["ListingDate"])을 datatime64[ns]로 변경해줘도, df["ListingDate"]에는 object로 결과 도출, 그래서 pd.to_datetime(df["ListingDate"])를 df["ListingDate"]로 할당(=) 해줘야 datatime64[ns]로 결과 호출


```python
# pd.to_datetime 을 통해 데이터의 타입을 변환합니다.
## pd.to_datetime(df["ListingDate"])을 datatime64[ns]로 변경해줘도, df["ListingDate"]에는 object로
## 결과 도출로, pd.to_datetime(df["ListingDate"])를 df["ListingDate"]로 할당(=)
df["ListingDate"] = pd.to_datetime(df["ListingDate"])
df["ListingDate"].head()
```




    0   2002-04-23
    1   2015-08-21
    2   1999-08-11
    3   2001-12-04
    4   2017-04-07
    Name: ListingDate, dtype: datetime64[ns]




```python
# ListingYear 파생변수 만들기
df["ListingYear"] = df["ListingDate"].dt.year
df["ListingYear"].tail(5)
```




    7334       NaN
    7335       NaN
    7336    1976.0
    7337    2000.0
    7338    2017.0
    Name: ListingYear, dtype: float64



* **note**
    1. numpy 파이썬의 공학용 계산기의 역할
    2. 년도 같은 경우는 int일 거 같지만, 결측치로 인해 float 타입으로 설정.
    2. float을 확인하는 방법은 type(np.nan)으로 확인 가능


```python
# nan은 not a number의 약자로 결측치를 의미합니다.
## numpy 파이썬의 공학용 계산기의 역할
## 년도 같은 경우는 int일 거 같지만, 결측치로 인해 float 타입으르 설정 float을 확인하는 방법은 type(np.nan)
## 으로 확인 가능
import numpy as np
type(np.nan)
```




    float




```python
df[["ListingDate", "ListingYear"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ListingDate</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2002-04-23</td>
      <td>2002.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2015-08-21</td>
      <td>2015.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1999-08-11</td>
      <td>1999.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2001-12-04</td>
      <td>2001.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2017-04-07</td>
      <td>2017.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7334</th>
      <td>NaT</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7335</th>
      <td>NaT</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7336</th>
      <td>1976-06-29</td>
      <td>1976.0</td>
    </tr>
    <tr>
      <th>7337</th>
      <td>2000-02-03</td>
      <td>2000.0</td>
    </tr>
    <tr>
      <th>7338</th>
      <td>2017-07-20</td>
      <td>2017.0</td>
    </tr>
  </tbody>
</table>
<p>7339 rows × 2 columns</p>
</div>



## 데이터 시각화 툴 소개

### matplotlib
* [Anatomy of a figure — Matplotlib documentation](https://matplotlib.org/3.1.1/gallery/showcase/anatomy.html)

### seaborn
* [seaborn: statistical data visualization — seaborn documentation](https://seaborn.pydata.org/index.html)

### pandas
* [Visualization — pandas documentation](https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html)

## 데이터 시각화를 위한 폰트설정


```python
def get_font_family():
    """
    시스템 환경에 따른 기본 폰트명을 반환하는 함수
    """
    import platform
    system_name = platform.system()
    # colab 사용자는 system_name이 'Linux'로 확인

    if system_name == "Darwin" :
        font_family = "AppleGothic"
    elif system_name == "Windows":
        font_family = "Malgun Gothic"
    else:
        !apt-get install fonts-nanum -qq  > /dev/null
        !fc-cache -fv

        import matplotlib as mpl
        mpl.font_manager._rebuild()
        findfont = mpl.font_manager.fontManager.findfont
        mpl.font_manager.findfont = findfont
        mpl.backends.backend_agg.findfont = findfont
        
        font_family = "NanumBarunGothic"
    return font_family
```


```python
# 위에서 만든 함수를 통해 시스템 폰트를 불러옵니다.
get_font_family()
```




    'Malgun Gothic'




```python
# 시각화를 위한 폰트설정
# 위에서 만든 함수를 통해 시스템 폰트를 불러와서 font_family 라는 변수에 할당합니다.
import matplotlib.pyplot as plt

font_family = get_font_family()
# 폰트설정
plt.rc("font", family=font_family)
# 마이너스폰트 설정
plt.rc("axes", unicode_minus=False)
# ggplot으로 그래프 스타일 설정
plt.style.use("ggplot")
# 그래프에 retina display 적용 -> 폰트를 설명하게 해줌. 단, retina display를 적용한 단말이라면
from IPython.display import set_matplotlib_formats
set_matplotlib_formats("retina")
```

### 폰트 설정 확인하기


```python
# 한글폰트 확인하기
pd.Series([1,3,5,-7,9]).plot(title="한글폰트")
```




    <AxesSubplot:title={'center':'한글폰트'}>




    
![png](output_57_1.png)
    


## 한 개의 변수 빈도수 구하고 시각화 하기
* Keyword

    * Series.value_counts()
    * Series.value_counts().plot()
    * Series.value_counts().plot.bar()
    * Series.value_counts().plot.barh()
    * sns.countplot()

### Market

* KOSPI (Korea Composite Stock Price Index) 
    * 우리나라의 종합주가지수(KOSPI)는 증권거래소가 1964.1.4일을 기준시점으로 다우존스식 주가평균을 지수화한 수정주가 평균지수를 산출, 발표하기 시작하였다. 다우존스식 주가지수는 주가지수를 구성하는 상장종목 중 일부 우량주만을 선정하여 산출하는 방식이다. 시가총액식 주가지수는 일정시점의 시가총액과 현재시점의 시가총액을 대비, 현재의 주가수준을 판단하는 방식이다. 즉, 지난 1980년 1월 4일 기준 상장종목 전체의 시가총액을 100으로 보고 현재 상장종목들의 시가총액이 어느 수준에 놓여 있는지를 보여주는 시스템이다.
    * 종합주가지수 = (비교시점의 시가총액 ÷ 기준시점의 시가총액) × 100
    * 출처 : [네이버 지식백과] 종합주가지수 (시사상식사전, pmg 지식엔진연구소) https://terms.naver.com/entry.nhn?docId=72147&cid=43667&categoryId=43667


* KOSDAQ (Korea Securities Dealers Automated Quotation) 
    * 미국의 나스닥(NASDAQ)을 한국식으로 합성한 용어로 1996년 7월 1일 증권업협회와 증권사들이 설립한 코스닥증권(주)에 의하여 개설되었다. 코스닥의 개장으로 단순히 증권거래소 상장을 위한 예비적 단계였던 장외시장이 미국의 나스닥(NASDAQ)과 같이 자금조달 및 투자시장으로 독립적인 역할을 수행하게 되었다. 이후 2005년 1월 유가증권시장, 코스닥시장, 선물시장이 증권선물거래소(현 한국거래소)로 통합됨에 따라 코스닥시장도 거래소가 개설한 정규시장으로 편입되었다. 코스닥은 유가증권시장에 비해 진입요건이 상대적으로 덜 까다롭기 때문에 주로 중소벤처기업들이 상장되어 있다.
    * 출처 : [네이버 지식백과] KOSDAQ (매일경제, 매경닷컴) https://terms.naver.com/entry.nhn?docId=18639&cid=43659&categoryId=43659


* KONEX(Korea New Exchange) : 
    * 일정 요건을 갖춘 비상장 기업에 문호를 개방하기 위해 개설하는 유가증권시장, 코스닥시장에 이은 제3의 주식시장을 일컫는다. 코넥스시장은 우수한 기술력을 보유하고 있음에도 불구하고, 짧은 경력 등을 이유로 자금 조달에 어려움을 겪는 초기 중소기업과 벤처기업이 자금을 원활하게 조달할 수 있도록 하기 위해 설립된 자본시장으로, 2013년 7월 1일 개장되었다. 
    * 출처 : [네이버 지식백과] 코넥스 (시사상식사전, pmg 지식엔진연구소) https://terms.naver.com/entry.nhn?docId=1006691&cid=43667&categoryId=43667


```python
# Market column에 어떤 데이터들이 있는지 unique로 확인합니다.
df["Market"].unique()
```




    array(['KOSDAQ', 'KOSPI', 'KONEX'], dtype=object)



* **note**
    1. 코스피에는 파생 상품도 포함하여, 상장된 종목수 보다 많음
    2. 파생 상품을 제외하려면 파생 상품의 특성에는 ListingDate 등등 결측치로 표현되어 이것을 활용하면 된다.


```python
# value_counts()로 빈도수를 구합니다.
## 코스피에는 파생 상품도 포함
## 파생 상품을 제외하려면 파생 상품의 특성에는 ListingDate 등등 결측치로 표현되어 이것을 활용하면 된다.
df["Market"].value_counts()
```




    KOSPI     5672
    KOSDAQ    1536
    KONEX      131
    Name: Market, dtype: int64



* **note**
    1. rot = 0는 X axis label의 폰트를 0도 변경 
    2. df["Market"].value_counts().plot.bar(rot=0)


```python
# 빈도수를 시각화 합니다.
## rot = 0는 X axis label의 폰트를 0도 변경
## df["Market"].value_counts().plot.bar(rot=0)
df["Market"].value_counts().plot.barh()
```




    <AxesSubplot:>




    
![png](output_63_1.png)
    



```python
# Seaborn countplot 활용하여 빈도수를 표현합니다.
sns.countplot(data=df, y="Market")
```




    <AxesSubplot:xlabel='count', ylabel='Market'>




    
![png](output_64_1.png)
    


### Sector


```python
# 섹터의 빈도수를 구합니다.
# 상위 30개 섹터의 빈도수를 sector_count_top 변수에 할당합니다.
# sector_count_top
sector_count_top = df["Sector"].value_counts().head(30)
sector_count_top.index
```




    Index(['소프트웨어 개발 및 공급업', '특수 목적용 기계 제조업', '전자부품 제조업', '자동차 신품 부품 제조업',
           '의약품 제조업', '기타 화학제품 제조업', '기타 금융업', '금융 지원 서비스업', '통신 및 방송 장비 제조업',
           '자연과학 및 공학 연구개발업', '반도체 제조업', '1차 철강 제조업', '의료용 기기 제조업',
           '일반 목적용 기계 제조업', '플라스틱제품 제조업', '기초 화학물질 제조업', '기초 의약물질 및 생물학적 제제 제조업',
           '기타 전문 도매업', '컴퓨터 프로그래밍, 시스템 통합 및 관리업',
           '전동기, 발전기 및 전기 변환 · 공급 · 제어 장치 제조업', '기타 식품 제조업',
           '영화, 비디오물, 방송프로그램 제작 및 배급업', '의료용품 및 기타 의약 관련제품 제조업', '봉제의복 제조업',
           '기계장비 및 관련 물품 도매업', '기타 금속 가공제품 제조업',
           '측정, 시험, 항해, 제어 및 기타 정밀기기 제조업; 광학기기 제외', '건물 건설업',
           '구조용 금속제품, 탱크 및 증기발생기 제조업', '자료처리, 호스팅, 포털 및 기타 인터넷 정보매개 서비스업'],
          dtype='object')




```python
sector_count_top
```




    소프트웨어 개발 및 공급업                           144
    특수 목적용 기계 제조업                            140
    전자부품 제조업                                 127
    자동차 신품 부품 제조업                             95
    의약품 제조업                                   95
    기타 화학제품 제조업                               93
    기타 금융업                                    90
    금융 지원 서비스업                                78
    통신 및 방송 장비 제조업                            72
    자연과학 및 공학 연구개발업                           58
    반도체 제조업                                   57
    1차 철강 제조업                                 57
    의료용 기기 제조업                                55
    일반 목적용 기계 제조업                             45
    플라스틱제품 제조업                                43
    기초 화학물질 제조업                               42
    기초 의약물질 및 생물학적 제제 제조업                     40
    기타 전문 도매업                                 38
    컴퓨터 프로그래밍, 시스템 통합 및 관리업                   37
    전동기, 발전기 및 전기 변환 · 공급 · 제어 장치 제조업         35
    기타 식품 제조업                                 34
    영화, 비디오물, 방송프로그램 제작 및 배급업                 32
    의료용품 및 기타 의약 관련제품 제조업                     30
    봉제의복 제조업                                  29
    기계장비 및 관련 물품 도매업                          25
    기타 금속 가공제품 제조업                            24
    측정, 시험, 항해, 제어 및 기타 정밀기기 제조업; 광학기기 제외     23
    건물 건설업                                    23
    구조용 금속제품, 탱크 및 증기발생기 제조업                  20
    자료처리, 호스팅, 포털 및 기타 인터넷 정보매개 서비스업          20
    Name: Sector, dtype: int64




```python
df["Sector"].isin(sector_count_top.index)
```




    0        True
    1       False
    2        True
    3        True
    4        True
            ...  
    7334    False
    7335    False
    7336    False
    7337    False
    7338     True
    Name: Sector, Length: 7339, dtype: bool




```python
df[df["Sector"].isin(sector_count_top.index)]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>전자부품 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
      <td>2002.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
      <td>1999.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>054620</td>
      <td>KOSDAQ</td>
      <td>APS홀딩스</td>
      <td>기타 금융업</td>
      <td>인터넷 트래픽 솔루션</td>
      <td>2001-12-04</td>
      <td>12월</td>
      <td>정기로</td>
      <td>http://www.apsholdings.co.kr</td>
      <td>경기도</td>
      <td>2001.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>265520</td>
      <td>KOSDAQ</td>
      <td>AP시스템</td>
      <td>특수 목적용 기계 제조업</td>
      <td>디스플레이 제조 장비</td>
      <td>2017-04-07</td>
      <td>12월</td>
      <td>김영주</td>
      <td>http://www.apsystems.co.kr</td>
      <td>경기도</td>
      <td>2017.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>211270</td>
      <td>KOSDAQ</td>
      <td>AP위성</td>
      <td>통신 및 방송 장비 제조업</td>
      <td>위성통신 단말기</td>
      <td>2016-03-04</td>
      <td>12월</td>
      <td>류장수</td>
      <td>http://www.apsi.co.kr</td>
      <td>서울특별시</td>
      <td>2016.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7328</th>
      <td>145020</td>
      <td>KOSDAQ</td>
      <td>휴젤</td>
      <td>기초 의약물질 및 생물학적 제제 제조업</td>
      <td>보툴리눔톡신, 필러</td>
      <td>2015-12-24</td>
      <td>12월</td>
      <td>손지훈</td>
      <td>http://www.hugel.co.kr</td>
      <td>강원도</td>
      <td>2015.0</td>
    </tr>
    <tr>
      <th>7329</th>
      <td>069260</td>
      <td>KOSPI</td>
      <td>휴켐스</td>
      <td>기타 화학제품 제조업</td>
      <td>화합물,화학제품 제조</td>
      <td>2002-10-07</td>
      <td>12월</td>
      <td>신진용</td>
      <td>http://www.huchems.com</td>
      <td>서울특별시</td>
      <td>2002.0</td>
    </tr>
    <tr>
      <th>7330</th>
      <td>024060</td>
      <td>KOSDAQ</td>
      <td>흥구석유</td>
      <td>기타 전문 도매업</td>
      <td>휘발유등</td>
      <td>1994-12-07</td>
      <td>12월</td>
      <td>김상우</td>
      <td>NaN</td>
      <td>대구광역시</td>
      <td>1994.0</td>
    </tr>
    <tr>
      <th>7331</th>
      <td>010240</td>
      <td>KOSDAQ</td>
      <td>흥국</td>
      <td>특수 목적용 기계 제조업</td>
      <td>굴삭기 Roller 및 형단조품</td>
      <td>2009-05-12</td>
      <td>12월</td>
      <td>류명준</td>
      <td>http://www.heungkuk.co.kr</td>
      <td>충청남도</td>
      <td>2009.0</td>
    </tr>
    <tr>
      <th>7338</th>
      <td>238490</td>
      <td>KOSDAQ</td>
      <td>힘스</td>
      <td>특수 목적용 기계 제조업</td>
      <td>OLED Mask 인장기, OLED Mask 검사기 등</td>
      <td>2017-07-20</td>
      <td>12월</td>
      <td>김주환</td>
      <td>http://www.hims.co.kr</td>
      <td>인천광역시</td>
      <td>2017.0</td>
    </tr>
  </tbody>
</table>
<p>1701 rows × 11 columns</p>
</div>



* **note**
    1. isin()에 대한 설명 사이트 : https://seong6496.tistory.com/112


```python
# df_sector_30
df_sector_30 = df[df["Sector"].isin(sector_count_top.index)] ## sector 빈도수 top 30에 대한 값 출력
##df_sector_30 = df[df["Sector"].isin(sector_count_top)] 
df_sector_30
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>전자부품 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
      <td>2002.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
      <td>1999.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>054620</td>
      <td>KOSDAQ</td>
      <td>APS홀딩스</td>
      <td>기타 금융업</td>
      <td>인터넷 트래픽 솔루션</td>
      <td>2001-12-04</td>
      <td>12월</td>
      <td>정기로</td>
      <td>http://www.apsholdings.co.kr</td>
      <td>경기도</td>
      <td>2001.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>265520</td>
      <td>KOSDAQ</td>
      <td>AP시스템</td>
      <td>특수 목적용 기계 제조업</td>
      <td>디스플레이 제조 장비</td>
      <td>2017-04-07</td>
      <td>12월</td>
      <td>김영주</td>
      <td>http://www.apsystems.co.kr</td>
      <td>경기도</td>
      <td>2017.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>211270</td>
      <td>KOSDAQ</td>
      <td>AP위성</td>
      <td>통신 및 방송 장비 제조업</td>
      <td>위성통신 단말기</td>
      <td>2016-03-04</td>
      <td>12월</td>
      <td>류장수</td>
      <td>http://www.apsi.co.kr</td>
      <td>서울특별시</td>
      <td>2016.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7328</th>
      <td>145020</td>
      <td>KOSDAQ</td>
      <td>휴젤</td>
      <td>기초 의약물질 및 생물학적 제제 제조업</td>
      <td>보툴리눔톡신, 필러</td>
      <td>2015-12-24</td>
      <td>12월</td>
      <td>손지훈</td>
      <td>http://www.hugel.co.kr</td>
      <td>강원도</td>
      <td>2015.0</td>
    </tr>
    <tr>
      <th>7329</th>
      <td>069260</td>
      <td>KOSPI</td>
      <td>휴켐스</td>
      <td>기타 화학제품 제조업</td>
      <td>화합물,화학제품 제조</td>
      <td>2002-10-07</td>
      <td>12월</td>
      <td>신진용</td>
      <td>http://www.huchems.com</td>
      <td>서울특별시</td>
      <td>2002.0</td>
    </tr>
    <tr>
      <th>7330</th>
      <td>024060</td>
      <td>KOSDAQ</td>
      <td>흥구석유</td>
      <td>기타 전문 도매업</td>
      <td>휘발유등</td>
      <td>1994-12-07</td>
      <td>12월</td>
      <td>김상우</td>
      <td>NaN</td>
      <td>대구광역시</td>
      <td>1994.0</td>
    </tr>
    <tr>
      <th>7331</th>
      <td>010240</td>
      <td>KOSDAQ</td>
      <td>흥국</td>
      <td>특수 목적용 기계 제조업</td>
      <td>굴삭기 Roller 및 형단조품</td>
      <td>2009-05-12</td>
      <td>12월</td>
      <td>류명준</td>
      <td>http://www.heungkuk.co.kr</td>
      <td>충청남도</td>
      <td>2009.0</td>
    </tr>
    <tr>
      <th>7338</th>
      <td>238490</td>
      <td>KOSDAQ</td>
      <td>힘스</td>
      <td>특수 목적용 기계 제조업</td>
      <td>OLED Mask 인장기, OLED Mask 검사기 등</td>
      <td>2017-07-20</td>
      <td>12월</td>
      <td>김주환</td>
      <td>http://www.hims.co.kr</td>
      <td>인천광역시</td>
      <td>2017.0</td>
    </tr>
  </tbody>
</table>
<p>1701 rows × 11 columns</p>
</div>




```python
# Seaborn countplot 활용하여 빈도수를 표현합니다.
plt.figure(figsize=(10,8)) ## figure size up
sns.countplot(data=df_sector_30, y="Sector")
```




    <AxesSubplot:xlabel='count', ylabel='Sector'>




    
![png](output_72_1.png)
    



```python
# 다양한 컬러 맵들 보여줌 ex) Blues_r
print(plt.colormaps())
```

    ['Accent', 'Accent_r', 'Blues', 'Blues_r', 'BrBG', 'BrBG_r', 'BuGn', 'BuGn_r', 'BuPu', 'BuPu_r', 'CMRmap', 'CMRmap_r', 'Dark2', 'Dark2_r', 'GnBu', 'GnBu_r', 'Greens', 'Greens_r', 'Greys', 'Greys_r', 'OrRd', 'OrRd_r', 'Oranges', 'Oranges_r', 'PRGn', 'PRGn_r', 'Paired', 'Paired_r', 'Pastel1', 'Pastel1_r', 'Pastel2', 'Pastel2_r', 'PiYG', 'PiYG_r', 'PuBu', 'PuBuGn', 'PuBuGn_r', 'PuBu_r', 'PuOr', 'PuOr_r', 'PuRd', 'PuRd_r', 'Purples', 'Purples_r', 'RdBu', 'RdBu_r', 'RdGy', 'RdGy_r', 'RdPu', 'RdPu_r', 'RdYlBu', 'RdYlBu_r', 'RdYlGn', 'RdYlGn_r', 'Reds', 'Reds_r', 'Set1', 'Set1_r', 'Set2', 'Set2_r', 'Set3', 'Set3_r', 'Spectral', 'Spectral_r', 'Wistia', 'Wistia_r', 'YlGn', 'YlGnBu', 'YlGnBu_r', 'YlGn_r', 'YlOrBr', 'YlOrBr_r', 'YlOrRd', 'YlOrRd_r', 'afmhot', 'afmhot_r', 'autumn', 'autumn_r', 'binary', 'binary_r', 'bone', 'bone_r', 'brg', 'brg_r', 'bwr', 'bwr_r', 'cividis', 'cividis_r', 'cool', 'cool_r', 'coolwarm', 'coolwarm_r', 'copper', 'copper_r', 'crest', 'crest_r', 'cubehelix', 'cubehelix_r', 'flag', 'flag_r', 'flare', 'flare_r', 'gist_earth', 'gist_earth_r', 'gist_gray', 'gist_gray_r', 'gist_heat', 'gist_heat_r', 'gist_ncar', 'gist_ncar_r', 'gist_rainbow', 'gist_rainbow_r', 'gist_stern', 'gist_stern_r', 'gist_yarg', 'gist_yarg_r', 'gnuplot', 'gnuplot2', 'gnuplot2_r', 'gnuplot_r', 'gray', 'gray_r', 'hot', 'hot_r', 'hsv', 'hsv_r', 'icefire', 'icefire_r', 'inferno', 'inferno_r', 'jet', 'jet_r', 'magma', 'magma_r', 'mako', 'mako_r', 'nipy_spectral', 'nipy_spectral_r', 'ocean', 'ocean_r', 'pink', 'pink_r', 'plasma', 'plasma_r', 'prism', 'prism_r', 'rainbow', 'rainbow_r', 'rocket', 'rocket_r', 'seismic', 'seismic_r', 'spring', 'spring_r', 'summer', 'summer_r', 'tab10', 'tab10_r', 'tab20', 'tab20_r', 'tab20b', 'tab20b_r', 'tab20c', 'tab20c_r', 'terrain', 'terrain_r', 'turbo', 'turbo_r', 'twilight', 'twilight_r', 'twilight_shifted', 'twilight_shifted_r', 'viridis', 'viridis_r', 'vlag', 'vlag_r', 'winter', 'winter_r']
    


```python
# 빈도수가 가장 많은 데이터 색인하기
plt.figure(figsize=(10,8))
sns.countplot(data=df_sector_30, y="Sector", palette = "Blues_r",
              order=sector_count_top.index).set_title("섹터별 빈도수")
```




    Text(0.5, 1.0, '섹터별 빈도수')




    
![png](output_74_1.png)
    


### Industry


```python
# Industry 의 빈도수를 구합니다.
# industry_top30
## df["Industry"] -> Series
df["Industry"].value_counts().head(30)
industry_top30 = df["Industry"].value_counts().head(30)
industry_top30.index
```




    Index(['기업인수합병', '지주회사', '지주사업', '모바일게임', '화장품', '기업인수 및 합병', '기업 인수 및 합병',
           '금융지원 서비스', '-', '합병', '금융지원서비스', '금융 지원 서비스', '금융지주회사', '자동차부품', '의약품',
           '증권업', '건강기능식품', '벤처캐피탈', '도급공사', '셋톱박스', '기업인수목적', '주정', '의료정보시스템',
           '화장품 용기', '화장품 유통', '부동산 투자 및 관리', '배합사료', '투자조합 결성 및 투자', '줄기세포치료제',
           '투자조합, PEF 결성 및 투자'],
          dtype='object')



* **note**
    1. sort_values() : 순차정렬[ascending: Union[bool, int, Sequence[Union[bool, int]]] = True,]
    2. ex) 빈도수가 높은 순서대로 정렬


```python
# Industry 빈도수를 pandas 의 plot 기능을 사용해 시각화 합니다.
## sort_values() 순차정렬[ascending: Union[bool, int, Sequence[Union[bool, int]]] = True,]
## sort_values() ex) 빈도수가 높은 수대로 정렬
industry_top30.sort_values().plot.barh(figsize =(10,8), title="Industry Count")
```




    <AxesSubplot:title={'center':'Industry Count'}>




    
![png](output_78_1.png)
    



```python
df_industry_30 = df[df["Industry"].isin(industry_top30.index)]
sns.countplot(data=df_industry_30, y="Industry")
```




    <AxesSubplot:xlabel='count', ylabel='Industry'>




    
![png](output_79_1.png)
    



```python
# seaborn
plt.figure(figsize=(10,8)) ## figure size up
##sns.countplot(data=df[df["Industry"].isin(industry_top30.index)], 
##              y="Industry",palette = "gist_rainbow", 
##             order=industry_top30.index).set_title("산업별 빈도수")
## 아래 코드도 사용 가능 : data = df_industry_30 으로 설정하여도, 왜? df_industry_30에는 변수를 할당하지
## 않았는데도 왜??
sns.countplot(data=df_industry_30, 
              y="Industry",
              palette = "gist_rainbow", 
             order=industry_top30.index).set_title("산업별 빈도수")


```




    Text(0.5, 1.0, '산업별 빈도수')




    
![png](output_80_1.png)
    


### Region 


```python
# Region 의 빈도수를 구합니다.
# value_counts()통해 지역별 상장회사의 빈도수를 봅니다.
df["Region"].value_counts()
```




    서울특별시      998
    경기도        694
    충청남도        96
    경상남도        90
    인천광역시       86
    충청북도        84
    부산광역시       77
    경상북도        65
    대구광역시       53
    대전광역시       51
    전라북도        28
    강원도         27
    울산광역시       26
    광주광역시       23
    전라남도        22
    세종특별자치시     10
    제주특별자치도     10
    홍콩           8
    미국           6
    케이맨 제도       5
    일본           3
    싱가포르         1
    Name: Region, dtype: int64



* **note**
    1. 메소드 체이닝(Method chaining) : 여러 메소드를 이어서 호출하는 문법입니다.메소드가 객체(this)를 반환하여 여러 메소드를 순차적으로 선언할 수 있도록 합니다.메소드 체이닝을 이용하면 코드가 간결해져 하나의 문장처럼 읽히게 할 수 있다는 장점이 있고 장기적으로는 유지보수에 도움 출처: https://my-devblog.tistory.com/5 [MY Devblog]
    2. 시각화 폰트나 색깔 표현하는 것은 ggplot으로 그래프 스타일 설정 plt.style.use("ggplot")


```python
## 메소드를 붙여서 진행하는 것을 "메소스 체이닝"
## 시각화 폰트나 색깔 표현하는 것은 ggplot으로 그래프 스타일 설정 plt.style.use("ggplot")
df["Region"].value_counts().sort_values().plot.barh(figsize=(10,6), title = "지역별 상장종목 수")
```




    <AxesSubplot:title={'center':'지역별 상장종목 수'}>




    
![png](output_84_1.png)
    



```python
# df["Region"]
region_top30.sort_values().plot.bar(figsize =(10,8), title="region Count")
```


    ---------------------------------------------------------------------------

    NameError                                 Traceback (most recent call last)

    <ipython-input-60-4ae5820219ec> in <module>
          1 # df["Region"]
    ----> 2 region_top30.sort_values().plot.bar(figsize =(10,8), title="region Count")
    

    NameError: name 'region_top30' is not defined



```python
# Region 의 빈도수를 seaborn 의 countplot 으로 그립니다.
sns.countplot(data=df, y="Region")
```




    <AxesSubplot:xlabel='count', ylabel='Region'>




    
![png](output_86_1.png)
    



```python
# order 기능을 통해 빈도수를 정렬합니다.
# df["Region"].value_counts().index 로 Region 의 순서를 가져와서 지정합니다.
sns.countplot(data=df, y="Region", 
              order = df["Region"].value_counts().index).set_title("지역별 상장 종목 수")
```




    Text(0.5, 1.0, '지역별 상장 종목 수')




    
![png](output_87_1.png)
    



```python
# Region 을 기준으로 정렬합니다.
plt.figure(figsize =(8,6))
sns.countplot(data=df.sort_values("Region"), y="Region").set_title("지역별 상장 종목 수")
```




    Text(0.5, 1.0, '지역별 상장 종목 수')




    
![png](output_88_1.png)
    


## 두 개의 변수 빈도수 구하고 시각화 하기
* crosstab 으로 빈도수 구하기
* seaborn의 countplot 으로 빈도수 시각화
* pandas의 plot 기능으로 시각화
    * lineplot : 연속된 데이터(숫자, 기간)
    * barplot : 비연속 데이터(범주형)
    * hist : 연속된 수치 데이터의 범주화

### 지역별 상장 시장 종목 빈도수 구하기
* pd.crosstab 을 통한 2개의 변수에 대한 빈도수 구하기

* **note**
    1. pd.crosstab()의 기능 중 dropna=False는 결측지 제외하는 기능
    2. pd.crosstab() 괄호 안에는 Series data를 넣어야 함.


```python
# pd.crosstab 을 통한 2개의 변수에 대한 빈도수 구하기
# Market 과 Region 으로 빈도수 구하기
## pd.crosstab()의 기능 중 dropna=False는 결측지 제외하는 기능
## pd.crosstab() 괄호 안에는 Series data를 넣어야 함.
pd.crosstab(df["Market"], df["Region"])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Region</th>
      <th>강원도</th>
      <th>경기도</th>
      <th>경상남도</th>
      <th>경상북도</th>
      <th>광주광역시</th>
      <th>대구광역시</th>
      <th>대전광역시</th>
      <th>미국</th>
      <th>부산광역시</th>
      <th>서울특별시</th>
      <th>...</th>
      <th>울산광역시</th>
      <th>인천광역시</th>
      <th>일본</th>
      <th>전라남도</th>
      <th>전라북도</th>
      <th>제주특별자치도</th>
      <th>충청남도</th>
      <th>충청북도</th>
      <th>케이맨 제도</th>
      <th>홍콩</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>7</td>
      <td>33</td>
      <td>1</td>
      <td>5</td>
      <td>5</td>
      <td>1</td>
      <td>7</td>
      <td>0</td>
      <td>2</td>
      <td>49</td>
      <td>...</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>16</td>
      <td>510</td>
      <td>47</td>
      <td>40</td>
      <td>9</td>
      <td>31</td>
      <td>37</td>
      <td>6</td>
      <td>39</td>
      <td>534</td>
      <td>...</td>
      <td>9</td>
      <td>57</td>
      <td>3</td>
      <td>12</td>
      <td>15</td>
      <td>2</td>
      <td>67</td>
      <td>61</td>
      <td>4</td>
      <td>8</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>4</td>
      <td>151</td>
      <td>42</td>
      <td>20</td>
      <td>9</td>
      <td>21</td>
      <td>7</td>
      <td>0</td>
      <td>36</td>
      <td>415</td>
      <td>...</td>
      <td>17</td>
      <td>25</td>
      <td>0</td>
      <td>7</td>
      <td>12</td>
      <td>7</td>
      <td>26</td>
      <td>15</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 22 columns</p>
</div>



* **note**
    1. sns.countplot() 안에는 hue 기능이 있으면, 범주형 데이터 지정 
    2. plt.xticks(rotation=90) ## x축 테스트 각도 변경 
    3. sns.countplot(data=df, y="Region", hue = "Market").set_title("마켓별 지역별 빈도수") 호출 시 -> Log 출력됨.
    4. g = sns.countplot(data=df, y="Region", hue = "Market").set_title("마켓별 지역별 빈도수") 호출 시 -> Log 출력 안됨.
  


```python
# countplot : Market 과 Region 으로 빈도수 시각화 하기
## countplot 안에는 hue 기능이 있으면, 범주형 데이터 지정 
plt.figure(figsize=(10,4))
## plt.xticks(rotation=90) ## x축 테스트 각도 변경 

## sns.countplot(data=df, y="Region", hue = "Market").set_title("마켓별 지역별 빈도수")
g = sns.countplot(data=df, y="Region", hue = "Market").set_title("마켓별 지역별 빈도수") ## log 출력이 안되면 좋겠으면 g로 할당
```


    
![png](output_94_0.png)
    


### 연도별 상장 종목 빈도수 분석


```python
# Market, ListingYear 빈도수 구하기
# market_year
market_year = pd.crosstab(df["Market"], df["ListingYear"])
market_year
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>12</td>
      <td>26</td>
      <td>23</td>
      <td>16</td>
      <td>14</td>
      <td>15</td>
      <td>11</td>
      <td>2</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>18</td>
      <td>35</td>
      <td>58</td>
      <td>89</td>
      <td>62</td>
      <td>68</td>
      <td>85</td>
      <td>97</td>
      <td>86</td>
      <td>75</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>...</td>
      <td>14</td>
      <td>11</td>
      <td>9</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>19</td>
      <td>15</td>
      <td>14</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 57 columns</p>
</div>



### seaborn을 통한 빈도수 시각화


```python
# Seaborn countplot 활용하여 빈도수를 표현합니다.
# hue 를 사용해 다른 변수를 함께 표현합니다. hue는 색상을 의미합니다.
plt.figure(figsize = (10,4))
plt.xticks(rotation=90)
sns.countplot(data=df, x="ListingYear", hue="Market")
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_98_1.png)
    


### Pandas를 통한 시각화


```python
# Pandas plot 기능 활용하여 기본 그래프(line)를 그립니다.
# Pandas plot으로 그릴 때 x축에 인덱스 값이 y축에는 컬럼에 있는 값이 들어갑니다.
# 컬럼이 여러개라면 다른 색상으로 그려집니다.
g = market_year.T.plot(figsize =(10,4), title = "연도별 상장 종목 수") ## X,Y이 서로 변경(T)
```


    
![png](output_100_0.png)
    


* **note**
    1. subplots=True 마켓 각각의 그래표 보여줌


```python
# 컬럼값을 subplots 으로 그립니다.
market_year.T.plot(figsize =(10,4), 
                   title = "연도별 상장 종목 수", subplots=True) ## subplots=True 마켓 각각의 그래표 보여줌
```




    array([<AxesSubplot:xlabel='ListingYear'>,
           <AxesSubplot:xlabel='ListingYear'>,
           <AxesSubplot:xlabel='ListingYear'>], dtype=object)




    
![png](output_102_1.png)
    



```python
# Pandas plot 기능 활용하여 막대 그래프(bar, barh)를 그립니다.
## line plot 그래프 연속된 수치값 나타냄(숫자 중간 생략)
## bar plot 그래프의 소수점이 나오는 것은 범주형 수치값으로 가정
market_year.T.plot.bar(figsize = (10,4),title="마켓 연도별 상장 종목 수")

```




    <AxesSubplot:title={'center':'마켓 연도별 상장 종목 수'}, xlabel='ListingYear'>




    
![png](output_103_1.png)
    



```python
# 컬럼명의 데이터 타입을 int 형태로 변경합니다.
# market_year.columns
market_year.columns = market_year.columns.astype(int) 
```


```python
# 막대(bar)그래프 그리기
# market_year
market_year.T.plot.bar(figsize=(10,4), rot=60)
```




    <AxesSubplot:xlabel='ListingYear'>




    
![png](output_105_1.png)
    


### groupby 와 pivot_table로 빈도수 구하기
<img src="https://pandas.pydata.org/pandas-docs/stable/_images/06_valuecounts.svg">

* [How to calculate summary statistics? — pandas documentation](https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/06_calculate_statistics.html)
* [Group by: split-apply-combine — pandas documentation](https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html)
* [pandas.pivot_table — pandas 1.2.0 documentation](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html)

* **note**
    1. pd.pivot_table vs pd.pivot 의 가장 큰 차이는 연산 유무(pivot_table - 연산 가능)


```python
# groupby([인덱스 컬럼 리스트])[연산에 사용할 컬럼].연산()
# market_year
## pd.pivot_table vs pd.pivot 의 가장 큰 차이는 연산 유무(pivot_table - 연산 가능)
df.groupby("Market") # 한개의 컬럼만 사용하는 경우
df.groupby(["Market", "ListingYear"]) # 두개 이상의 컬럼을 사용할 경우 소괄호 안에 대괄호를 사용함
```




    <pandas.core.groupby.generic.DataFrameGroupBy object at 0x00000222ECA77220>




```python
## # 두개 이상의 컬럼을 사용할 경우 소괄호 안에 대괄호를 사용함
df.groupby(["Market", "ListingYear"])["Symbol"].count()
```




    Market  ListingYear
    KONEX   2013.0         12
            2014.0         12
            2015.0         26
            2016.0         23
            2017.0         16
                           ..
    KOSPI   2017.0         20
            2018.0         19
            2019.0         15
            2020.0         14
            2021.0         21
    Name: Symbol, Length: 99, dtype: int64



* **note**
    1. unstatck() 마지막에 있는 인덱스 값(ListingYear)이 컬럼으로 오게 됨
    2. fillna(0)는 결측치를 0으로 표시
    3. astype(int) int type으로 출력 변경


```python
## unstatck() 마지막에 있는 인덱스 값(ListingYear)이 컬럼으로 오게 됨
## fillna(0)는 결측치를 0으로 표시
## astype(int) int type으로 출력 변경
df.groupby(["Market", "ListingYear"])["Symbol"].count().unstack().fillna(0).astype(int)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>12</td>
      <td>26</td>
      <td>23</td>
      <td>16</td>
      <td>14</td>
      <td>15</td>
      <td>11</td>
      <td>2</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>18</td>
      <td>35</td>
      <td>58</td>
      <td>89</td>
      <td>62</td>
      <td>68</td>
      <td>85</td>
      <td>97</td>
      <td>86</td>
      <td>75</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>...</td>
      <td>14</td>
      <td>11</td>
      <td>9</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>19</td>
      <td>15</td>
      <td>14</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 57 columns</p>
</div>




```python
# 인덱스 컬럼 리스트 3개로 설정
df.groupby(["Market", "Region","ListingYear"])["Symbol"].count().unstack().fillna(0).astype(int)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th>Region</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="16" valign="top">KONEX</th>
      <th>강원도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>경기도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>3</td>
      <td>2</td>
      <td>2</td>
      <td>7</td>
      <td>5</td>
      <td>3</td>
      <td>10</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>경상남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>경상북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>광주광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>대구광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>대전광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>부산광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>서울특별시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>4</td>
      <td>10</td>
      <td>11</td>
      <td>7</td>
      <td>6</td>
      <td>4</td>
      <td>1</td>
      <td>6</td>
      <td>0</td>
    </tr>
    <tr>
      <th>세종특별자치시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>인천광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>전라남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>전라북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>제주특별자치도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>충청남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>충청북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th rowspan="21" valign="top">KOSDAQ</th>
      <th>강원도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>경기도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>6</td>
      <td>14</td>
      <td>20</td>
      <td>34</td>
      <td>24</td>
      <td>26</td>
      <td>28</td>
      <td>22</td>
      <td>28</td>
      <td>19</td>
    </tr>
    <tr>
      <th>경상남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>경상북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>광주광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>대구광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>대전광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>미국</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>부산광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>서울특별시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>4</td>
      <td>13</td>
      <td>18</td>
      <td>30</td>
      <td>20</td>
      <td>13</td>
      <td>37</td>
      <td>51</td>
      <td>39</td>
      <td>42</td>
    </tr>
    <tr>
      <th>세종특별자치시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>울산광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>인천광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>5</td>
      <td>0</td>
      <td>5</td>
      <td>5</td>
      <td>2</td>
      <td>3</td>
      <td>1</td>
    </tr>
    <tr>
      <th>일본</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>전라남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>전라북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>제주특별자치도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>충청남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>1</td>
      <td>7</td>
      <td>1</td>
      <td>6</td>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>충청북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>4</td>
      <td>4</td>
      <td>3</td>
      <td>3</td>
      <td>4</td>
      <td>3</td>
      <td>4</td>
    </tr>
    <tr>
      <th>케이맨 제도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>홍콩</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th rowspan="19" valign="top">KOSPI</th>
      <th>강원도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>경기도</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>...</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>5</td>
      <td>1</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>2</td>
      <td>6</td>
    </tr>
    <tr>
      <th>경상남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>경상북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>광주광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>대구광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>대전광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>부산광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>서울특별시</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>3</td>
      <td>4</td>
      <td>1</td>
      <td>2</td>
      <td>17</td>
      <td>...</td>
      <td>7</td>
      <td>6</td>
      <td>3</td>
      <td>7</td>
      <td>10</td>
      <td>13</td>
      <td>14</td>
      <td>7</td>
      <td>10</td>
      <td>9</td>
    </tr>
    <tr>
      <th>세종특별자치시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>싱가포르</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>울산광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>인천광역시</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>전라남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>전라북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>제주특별자치도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>...</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>충청남도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>충청북도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>케이맨 제도</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>56 rows × 57 columns</p>
</div>



* **note**
    1. pd.pivot_table 특징이 aggfunc='mean'으로 자동으로 평균 구해줌
    2. pd.pivot_table(data=df, index = "Market", columns = "ListingYear") 에러 발생 
    3. 숫자로 된 Value 값이 ListingYear 하나이기 때문에 에러 발생, 특정 value 값을 정해야함. 그러나 오류 발생


```python
# pivot_table로 같은 결과가 나오게 연산하기
## pd.pivot_table 특징이 aggfunc='mean'으로 자동으로 평균 구해줌
## pd.pivot_table(data=df, index = "Market", columns = "ListingYear") 에러 발생 
## 숫자로 된 Value 값이 ListingYear 하나이기 때문에 에러 발생, 특정 value 값을 정해야함. 그러나 오류 발생
pd.pivot_table(data=df, index = "Market", columns = "ListingYear", values = "Symbol")
```


    ---------------------------------------------------------------------------

    DataError                                 Traceback (most recent call last)

    <ipython-input-77-86cc2ac7ec17> in <module>
          3 ## pd.pivot_table(data=df, index = "Market", columns = "ListingYear") 에러 발생
          4 ## 숫자로 된 Value 값이 ListingYear 하나이기 때문에 에러 발생, 특정 value 값을 정해야함. 그러나 오류 발생
    ----> 5 pd.pivot_table(data=df, index = "Market", columns = "ListingYear", values = "Symbol")
    

    ~\Anaconda3\lib\site-packages\pandas\core\reshape\pivot.py in pivot_table(data, values, index, columns, aggfunc, fill_value, margins, dropna, margins_name, observed)
        111 
        112     grouped = data.groupby(keys, observed=observed)
    --> 113     agged = grouped.agg(aggfunc)
        114     if dropna and isinstance(agged, ABCDataFrame) and len(agged.columns):
        115         agged = agged.dropna(how="all")
    

    ~\Anaconda3\lib\site-packages\pandas\core\groupby\generic.py in aggregate(self, func, engine, engine_kwargs, *args, **kwargs)
        943         func = maybe_mangle_lambdas(func)
        944 
    --> 945         result, how = aggregate(self, func, *args, **kwargs)
        946         if how is None:
        947             return result
    

    ~\Anaconda3\lib\site-packages\pandas\core\aggregation.py in aggregate(obj, arg, *args, **kwargs)
        577 
        578     if isinstance(arg, str):
    --> 579         return obj._try_aggregate_string_function(arg, *args, **kwargs), None
        580     elif is_dict_like(arg):
        581         arg = cast(AggFuncTypeDict, arg)
    

    ~\Anaconda3\lib\site-packages\pandas\core\base.py in _try_aggregate_string_function(self, arg, *args, **kwargs)
        313         if f is not None:
        314             if callable(f):
    --> 315                 return f(*args, **kwargs)
        316 
        317             # people may try to aggregate on a non-callable attribute
    

    ~\Anaconda3\lib\site-packages\pandas\core\groupby\groupby.py in mean(self, numeric_only)
       1494         Name: B, dtype: float64
       1495         """
    -> 1496         return self._cython_agg_general(
       1497             "mean",
       1498             alt=lambda x, axis: Series(x).mean(numeric_only=numeric_only),
    

    ~\Anaconda3\lib\site-packages\pandas\core\groupby\generic.py in _cython_agg_general(self, how, alt, numeric_only, min_count)
       1013         self, how: str, alt=None, numeric_only: bool = True, min_count: int = -1
       1014     ) -> DataFrame:
    -> 1015         agg_mgr = self._cython_agg_blocks(
       1016             how, alt=alt, numeric_only=numeric_only, min_count=min_count
       1017         )
    

    ~\Anaconda3\lib\site-packages\pandas\core\groupby\generic.py in _cython_agg_blocks(self, how, alt, numeric_only, min_count)
       1119 
       1120         if not len(new_mgr):
    -> 1121             raise DataError("No numeric types to aggregate")
       1122 
       1123         return new_mgr
    

    DataError: No numeric types to aggregate


* **note**
    1. Values라는 특정값을 정해줘도,aggfunc = 'mean'이라는 디폴트 값이 있기 때문에 aggfunc = 'count'으로 설정해야 빈도수 구할 수 있음.
    2. fill_value = 0은 결측치에 대한 값을 0으로 설정


```python
## Values라는 특정값을 정해주어도,aggfunc = 'mean'이라는 디폴트 값이 있기 때문에 aggfunc = 'count'으로
## 설정해야 빈도수 구할 수 있음.
## fill_value = 0은 결측치에 대한 값을 0으로 설정
pd.pivot_table(data=df, index = "Market", 
               columns = "ListingYear", 
               values = "Symbol", 
               aggfunc = "count", fill_value = 0)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>12</td>
      <td>26</td>
      <td>23</td>
      <td>16</td>
      <td>14</td>
      <td>15</td>
      <td>11</td>
      <td>2</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>18</td>
      <td>35</td>
      <td>58</td>
      <td>89</td>
      <td>62</td>
      <td>68</td>
      <td>85</td>
      <td>97</td>
      <td>86</td>
      <td>75</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>...</td>
      <td>14</td>
      <td>11</td>
      <td>9</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>19</td>
      <td>15</td>
      <td>14</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 57 columns</p>
</div>



* **note**
    1. 두개 변수로 지정해줄 경우, 대괄호 사용(또한, 하나의 변수를 사용할 때도 대괄호 사용 가능)


```python
## 두개 변수로 지정해줄 경우, 대괄호 사용(또한, 하나의 변수를 사용할 때도 대괄호 사용 가능)
pd.pivot_table(data=df, index = ["Market", "Region"], 
               columns = "ListingYear", 
               values = "Symbol", 
               aggfunc = "count", fill_value = 0)
```


```python
market_year = df.groupby(["Market","ListingYear"])["Symbol"].count()
market_year.unstack().fillna(0).astype(int)
## 아래의 데이터는 "와이프 폼 데이터"라고 부름
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>12</td>
      <td>26</td>
      <td>23</td>
      <td>16</td>
      <td>14</td>
      <td>15</td>
      <td>11</td>
      <td>2</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>18</td>
      <td>35</td>
      <td>58</td>
      <td>89</td>
      <td>62</td>
      <td>68</td>
      <td>85</td>
      <td>97</td>
      <td>86</td>
      <td>75</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>...</td>
      <td>14</td>
      <td>11</td>
      <td>9</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>19</td>
      <td>15</td>
      <td>14</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 57 columns</p>
</div>



* **note**
    1. 와이드 폼 데이터는 Seaborn에서 그래프화 하기 어려움.
    2. Symbol이 count로 변경이 안되는 것은 df_market_year.rename(columns={"Symbol":"count"})를 할당하지 않았기 때문이다. 


```python
# 위의 groupby 결과를 scatterplot으로 그립니다.
# df_market_year
## 와이드 폼 데이터는 Seaborn에서 그래프화 하기 어려움
df_market_year = market_year.reset_index()
df_market_year.rename(columns={"Symbol":"count"})
df_market_year 
## Symbol이 count로 변경이 안되는 것은 
## df_market_year.rename(columns={"Symbol":"count"})를 할당하지 않았기 때문이다. 
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Market</th>
      <th>ListingYear</th>
      <th>Symbol</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>KONEX</td>
      <td>2013.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>1</th>
      <td>KONEX</td>
      <td>2014.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>KONEX</td>
      <td>2015.0</td>
      <td>26</td>
    </tr>
    <tr>
      <th>3</th>
      <td>KONEX</td>
      <td>2016.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>4</th>
      <td>KONEX</td>
      <td>2017.0</td>
      <td>16</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>94</th>
      <td>KOSPI</td>
      <td>2017.0</td>
      <td>20</td>
    </tr>
    <tr>
      <th>95</th>
      <td>KOSPI</td>
      <td>2018.0</td>
      <td>19</td>
    </tr>
    <tr>
      <th>96</th>
      <td>KOSPI</td>
      <td>2019.0</td>
      <td>15</td>
    </tr>
    <tr>
      <th>97</th>
      <td>KOSPI</td>
      <td>2020.0</td>
      <td>14</td>
    </tr>
    <tr>
      <th>98</th>
      <td>KOSPI</td>
      <td>2021.0</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
<p>99 rows × 3 columns</p>
</div>




```python
# 위의 groupby 결과를 scatterplot으로 그립니다.(2)
df_market_year = df_market_year.rename(columns={"Symbol":"count"})
## df_market_year
plt.figure(figsize=(10,4))
sns.scatterplot(data=df_market_year, x = "ListingYear", y="count",  hue="Market")
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_122_1.png)
    


* **note**
    1. lineplot 기능 중 ci=95(신뢰도), n_boot=1000(샘플링 ※ 현재 3개[코스피, 코스닥, 코스넷] 밖에 없음)
    2. ci 대신 "sd" 표준편차를 쓸 수 있음.


```python
# lineplot 그리기(1)
## lineplot 기능 중 ci=95(신뢰도), n_boot=1000(샘플링 ※ 현재 3개[코스피, 코스닥, 코스넷] 밖에 없음)
## ci 대신 "sd" 표준편차를 쓸 수 있음.
sns.lineplot(data=df_market_year, x = "ListingYear", y="count")
```

* **note**
    1. ci 설정하며 부트 스크래핑으로 호출 시간이 오래 걸리기 때문에, 신뢰도가 의미가 없으면 ci=none으로 설정


```python
# lineplot 그리기(2)
## ci 설정하며 부트 스크래핑으로 호출 시간이 오래 걸리기 때문에, 신뢰도가 의미가 없으면 ci=none으로 설정
sns.lineplot(data=df_market_year, x = "ListingYear", y="count", ci=None)
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_126_1.png)
    



```python
# lineplot 그리기(3)
plt.figure(figsize=(10,4))
sns.lineplot(data=df_market_year, x = "ListingYear", y="count", ci=None, hue="Market")
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_127_1.png)
    


* **note**
    1. sns.scatterplot 대신 sns.relplot 쓰는 이유는 row, col 사용하여, subplot를 사용 가능


```python
# relplot으로 subplot 그리기 - scatter
## sns.scatterplot 대신 sns.relplot 쓰는 이유는 row, col 사용하여, subplot를 사용 가능
display(sns.relplot(data=df_market_year, x="ListingYear", y="count", hue="Market", row="Market"))
sns.relplot(data=df_market_year, x="ListingYear", y="count", hue="Market", col="Market")
```


    <seaborn.axisgrid.FacetGrid at 0x222edf9b610>





    <seaborn.axisgrid.FacetGrid at 0x222edf6f550>




    
![png](output_129_2.png)
    



    
![png](output_129_3.png)
    


* **note**
    1. sns.relplot는 FacetGrid를 내부 사용으로 plt.figure() 기능 사용 못함
    2. 그래서 sns.relplot의 height=2, aspect=3 사용하여 크기 조절
    3. relplot = lineplot + scatterplot의 subplot 나타내는 기능을 가짐.
    4. Seaborn은 범주형 데이터, relplot(relation plot)한 관계 데이터를 나타나게 함.


```python
# relplot으로 subplot 그리기 - line
plt.figure(figsize=(10,4)) 
## 그래서 height=2, aspect=3 사용하여 크기 조절
sns.relplot(data=df_market_year, x="ListingYear", y="count", 
            hue="Market", row="Market", kind = "line", height=2, aspect=3)
## relplot = lineplot + scatterplot의 subplot 나타내는 기능을 가짐.
## Seaborn은 범주형 데이터, relplot(relation plot)한 관계 데이터를 나타나게 함.
```




    <seaborn.axisgrid.FacetGrid at 0x222ee390f40>




    <Figure size 720x288 with 0 Axes>



    
![png](output_131_2.png)
    


### 구간화 binnig 과 히스토그램
* 연속된 수치 데이터를 범주형 데이터로 표현, bucketing 이라고 부르기도 함
* 히스토그램 : 도수분포를 그래프 형태로 표현한 것
* 막대그래프와 비슷해 보이지만 다른 그래프
* 참고 : [히스토그램 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%ED%9E%88%EC%8A%A4%ED%86%A0%EA%B7%B8%EB%9E%A8)


```python
df["ListingYear"].describe()
```




    count    2463.000000
    mean     2005.350386
    std        12.813329
    min      1956.000000
    25%      1999.000000
    50%      2008.000000
    75%      2016.000000
    max      2021.000000
    Name: ListingYear, dtype: float64



* **note**
    1.bins(막대수)에 따라 히스토그램 모양이 달라짐.


```python
# bins 의 갯수에 따라 그래프의 표현 방법이 달라집니다.
## bins(막대수)에 따라 히스토그램 모양이 달라짐
df["ListingYear"].plot.hist(bins=2)
```




    <AxesSubplot:ylabel='Frequency'>




    
![png](output_135_1.png)
    



```python
# 히스토그램의 밀도를 추정해서 그린 그래프
df["ListingYear"].plot.kde()
```




    <AxesSubplot:ylabel='Density'>




    
![png](output_136_1.png)
    


## 데이터 색인


```python
# 케이맨 제도에 있는 회사 찾기

```


```python
# 1970년 이전에 상장한 기업을 찾습니다.

```


```python
# and => &
# or  => |
True and True
```


```python
# 2020년 상장한 서울특별시에 소재한 코스피 종목을 찾습니다.

```


```python

```

### 지역별 섹터


```python
# Sector, Region 으로 crosstab 연산을 합니다.
# df_sr

```

### 컬럼과 인덱스 값으로 색인하기


```python
# 특정 컬럼만 가져오기

```

### 특정 행만 가져오기

* .loc[행]
* .loc[행, 열]
* .loc[조건식, 열]


```python
# df_sr에서 "소프트웨어 개발 및 공급업" 행만 가져오기

```


```python
# loc 로 행인덱스 가져오기
# 행에서 "소프트웨어 개발 및 공급업", "금융 지원 서비스업", "의약품 제조업" 가져오기

```


```python
# loc 로 행, 컬럼 가져오기
# 행에서 "소프트웨어 개발 및 공급업", "금융 지원 서비스업", "의약품 제조업"
# 열에서 "서울특별시" 가져오기


```


```python
# loc로 여러 행과 열 가져오기

```


```python
# "소프트웨어 개발 및 공급업" 만 가져와서 막대그래프를 그립니다.

```


```python
# "의약품 제조업" 만 가져와서 막대그래프를 그립니다.


```


```python
# iloc[행]
# iloc[행,열]

```


```python

```


```python

```


```python
# df.head 혹은 tail도 내부에서 iloc를 슬라이싱으로 사용하고 있습니다.
# df.head??
```


```python

```


```python
# df_sr.tail??
```


```python

```


```python

```


```python

```


```python

```
